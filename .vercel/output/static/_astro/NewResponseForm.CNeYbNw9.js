import{j as s}from"./Compact.BnC6XZYP.js";import{r as a,R as N}from"./index.C--6pZtI.js";/* empty css                           */import{u as o}from"./Respose.DeoTToFM.js";import{B as c}from"./button.DmgfHEG2.js";const L=({user_id:l,topicId:i})=>{const[n,u]=a.useState(""),[p,m]=a.useState(!1),t=a.useRef(null),r=o(e=>e.response_id),f=o(e=>e.content),x=o(e=>e.username),d=o(e=>e.clearResponse),y=s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",className:"CloseIcon",fill:"black",width:"24",height:"24",children:s.jsx("path",{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64Zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372Zm128.013 198.826c.023.007.042.018.083.059l45.02 45.019c.04.04.05.06.058.083a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082L557.254 512l127.861 127.862a.268.268 0 0 1 .05.06l.009.023a.118.118 0 0 1 0 .07c-.007.022-.018.041-.059.082l-45.019 45.02c-.04.04-.06.05-.083.058a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059L512 557.254 384.14 685.115c-.042.041-.06.052-.084.059a.118.118 0 0 1-.07 0c-.022-.007-.041-.018-.082-.059l-45.02-45.019c-.04-.04-.05-.06-.058-.083a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082L466.745 512l-127.86-127.86a.268.268 0 0 1-.05-.061l-.009-.023a.118.118 0 0 1 0-.07c.007-.022.018-.041.059-.082l45.019-45.02c.04-.04.06-.05.083-.058a.118.118 0 0 1 .07 0c.022.007.041.018.082.059L512 466.745l127.862-127.86c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"})}),h=e=>{e.style.height="1px",e.style.height=`${25+e.scrollHeight}px`},g=()=>{h(t.current)},w=e=>{u(e.target.value),h(t.current)},S=()=>{u(""),d();const e=t.current;e.style.height="1px",e.style.height="50px"},j=e=>{e.preventDefault(),R()},R=async()=>{try{console.log("Submitting new response with values:",{topicId:i,authorId:l,content:n,quoted_response_id:r});const e=await fetch(`${{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}.BACKEND_URL}/forum/response`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topicId:i,authorId:l,content:n,quoted_response_id:r})});if(e.ok){const E=await e.json();console.log("New response added:",E),m(!0)}else console.error("Error adding a new response:",e.statusText)}catch(e){console.error("Error posting the request:",e)}};N.useEffect(()=>{p&&window.location.reload()},[p]);const C=()=>{};return s.jsxs("form",{className:"form",onSubmit:j,children:[r&&s.jsxs("div",{className:"responseQuoted-container",children:[s.jsxs("p",{id:"responseQuoted",className:"responseQuoted",children:["@",x," wrote: ",f]}),s.jsx(c,{type:"secondary",shape:"circle",icon:y,onClick:()=>d()})]}),s.jsx("textarea",{ref:t,value:n,onChange:w,onKeyUp:g,onClick:C,rows:"1",placeholder:"Write your response here...",className:"response-input",id:"textarea-adjust",style:{overflow:"hidden"}}),s.jsx(c,{htmlType:"button",className:"buttonOutline",type:"primary",ghost:!0,onClick:S,children:"Cancel"}),s.jsx(c,{className:"submit",type:"submit",htmlType:"submit",children:"Submit"})]})};export{L as default};
